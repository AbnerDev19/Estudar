<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Notion - Gamificado</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="fotos/mY.png">
    <style>
        /* Layout Dividido: Dashboard na Esquerda, Sala de Estudos na Direita */
        .split-main-content {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 40px 60px;
            max-width: 1600px;
            margin: 0 auto;
            height: 100vh;
            overflow: hidden;
        }
        .column-scroll {
            overflow-y: auto;
            padding-right: 16px;
            height: 100%;
        }
        .column-scroll::-webkit-scrollbar {
            width: 4px;
        }
        .column-scroll::-webkit-scrollbar-thumb {
            background-color: transparent;
            border-radius: 4px;
            transition: 0.2s;
        }
        .column-scroll:hover::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
        }
        /* Oculta o menu de navega√ß√£o lateral j√° que est√° tudo na mesma tela */
        .sidebar-menu {
            display: none !important;
        }
        /* Aplica√ß√£o do Amarelo mais Escuro preferido */
        .text-yellow, .ri-fire-fill.text-yellow {
            color: #6B4D06 !important;
        }
        .streak-multiplier {
            border-color: #6B4D06 !important;
        }
    </style>
</head>

<body>
    <div id="sync-status" class="sync-status text-sm">
        <i class="ri-loader-4-line spin"></i> Conectando ao Banco de Dados...
    </div>

    <div class="app-layout">
        <aside class="sidebar">
            <div class="profile-section">
                <div class="avatar-container">
                    <img src="https://ui-avatars.com/api/?name=Neo+Player&background=f1f1ef&color=6B4D06&size=128" class="avatar" alt="Avatar">
                </div>
                <div class="profile-info">
                    <h2 id="global-name">Abner üòä</h2>
                    <p class="text-sub" id="global-level-text">Lvl 1 ‚Ä¢ XP: 0</p>
                </div>
            </div>

            <nav class="sidebar-menu"></nav>

            <div class="sidebar-block">
                <div class="flex-between text-sm mb-1">
                    <span class="font-medium">Progresso do N√≠vel</span>
                    <span id="xp-display" class="text-sub">0 / 1000</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill xp-fill" id="xp-bar" style="width: 0%; background-color: #6B4D06;"></div>
                </div>
            </div>

            <div class="sidebar-block">
                <h3 class="sidebar-title">Estat√≠sticas de Hoje</h3>
                <ul class="stats-list">
                    <li>
                        <i class="ri-arrow-up-circle-line text-blue"></i>
                        <span>XP Ganho:</span>
                        <strong id="today-xp" style="margin-left: auto;">0</strong>
                    </li>
                    <li>
                        <i class="ri-check-line text-green"></i>
                        <span>Metas Di√°rias:</span>
                        <strong id="today-goals" style="margin-left: auto;">0/0</strong>
                    </li>
                </ul>
            </div>

            <div class="sidebar-block">
                <div class="flex-between mb-1" style="align-items: center;">
                    <h3 class="sidebar-title" style="margin:0;">Meus Atributos</h3>
                    <button class="icon-btn" id="btn-open-attr" title="Novo Atributo"><i class="ri-add-line"></i></button>
                </div>
                <div id="attributes-container" style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                </div>
            </div>

            <div class="sidebar-block history-block">
                <div class="flex-between mb-1" style="align-items: center;">
                    <h3 class="sidebar-title" style="margin:0;">Hist√≥rico Recente</h3>
                    <button class="icon-btn" id="btn-clear-history" title="Limpar Hist√≥rico"><i class="ri-delete-bin-line"></i></button>
                </div>
                <ul class="history-list" id="history-container">
                </ul>
            </div>
        </aside>

        <main class="split-main-content">
            
            <div class="column-scroll">
                <header class="page-header">
                    <h1 contenteditable="true" class="page-title" spellcheck="false">Meu Dashboard</h1>
                    <p id="daily-quote" class="page-description">"A evolu√ß√£o acontece todos os dias."</p>
                </header>

                <div class="quick-actions">
                    <button class="action-btn" id="btn-open-task"><i class="ri-add-line"></i> Nova Miss√£o</button>
                    <button class="action-btn" id="btn-open-habit"><i class="ri-add-line"></i> Novo H√°bito</button>
                    <button class="action-btn" id="btn-open-activity"><i class="ri-timer-line"></i> Nova Atividade</button>
                    <button class="action-btn" id="btn-open-study"><i class="ri-add-circle-line"></i> Inserir Tempo</button>
                    <button class="action-btn" id="btn-open-log"><i class="ri-edit-line"></i> Registrar A√ß√£o</button>
                </div>

                <section class="content-section">
                    <div class="section-header">
                        <h2><i class="ri-timer-flash-line"></i> Atividades (Com Prazo)</h2>
                    </div>
                    <div class="tasks-list" id="activities-container"></div>
                </section>

                <section class="content-section">
                    <div class="section-header">
                        <h2><i class="ri-checkbox-multiple-line"></i> Miss√µes do Dia</h2>
                        <span id="task-progress-text" class="text-sub text-sm">0% Conclu√≠do</span>
                    </div>
                    <div class="progress-track mb-3">
                        <div class="progress-fill blue-fill" id="day-progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="tasks-list" id="tasks-container"></div>
                </section>

                <section class="content-section">
                    <div class="section-header">
                        <h2><i class="ri-loop-left-line"></i> H√°bitos Di√°rios</h2>
                    </div>
                    <div class="habits-list" id="habits-container"></div>
                </section>
            </div>

            <div class="column-scroll">
                <header class="page-header">
                    <h1 class="page-title">Sala de Estudos</h1>
                    <p class="page-description">Foque no aprendizado. O tempo estudado gera XP autom√°tico!</p>
                </header>

                <div class="study-stats-grid">
                    <div class="study-card">
                        <h4>Sequ√™ncia de Estudos</h4>
                        <div class="big-number"><span id="streak-count" class="text-orange">0</span> Dias Seguidos</div>
                        <div class="streak-days" id="streak-days-container"></div>
                    </div>
                    <div class="study-card">
                        <h4>Tempo Total Estudado</h4>
                        <div class="big-number" id="total-study-time">0h 0m</div>
                        <p class="text-sub text-sm mt-1">Sua dedica√ß√£o acumulada.</p>
                    </div>
                </div>

                <div class="study-controls-header flex-between mb-3">
                    <div class="study-goal-box">
                        <span class="text-sm text-sub">Meta Di√°ria:</span>
                        <strong id="daily-study-goal-display">0h 0m</strong>
                        <button class="icon-btn" id="btn-edit-study-goal" title="Editar Meta"><i class="ri-pencil-line"></i></button>
                    </div>
                    <div class="streak-multiplier">
                        <span class="text-sm font-medium"><i class="ri-fire-fill text-yellow"></i> Ofensiva: <span id="streak-multiplier-text">1.0x XP</span></span>
                    </div>
                </div>

                <div class="timer-box">
                    <div class="timer-tabs">
                        <button class="timer-tab active" id="tab-stopwatch">Cron√¥metro</button>
                        <button class="timer-tab" id="tab-countdown">Temporizador</button>
                    </div>

                    <div class="subject-selector-group mb-3">
                        <select id="timer-subject-select" class="notion-input" style="max-width: 250px; display: inline-block;">
                            <option value="" disabled selected>Selecione a mat√©ria...</option>
                        </select>
                        <button class="action-btn" id="btn-new-subject" style="display: inline-flex; padding: 4px 8px; margin-left: 8px;"><i class="ri-add-line"></i> Nova Mat√©ria</button>
                    </div>

                    <div id="countdown-setup" style="display: none; margin-bottom: 16px;">
                        <input type="number" id="countdown-input-minutes" class="notion-input" placeholder="Minutos (ex: 25)" style="max-width: 120px; text-align: center;">
                    </div>

                    <div class="timer-display" id="timer-display">00:00:00</div>
                    <p class="text-sub text-sm" id="timer-xp-hint">Ganha 1 XP (+ b√¥nus de ofensiva) por minuto.</p>
                    
                    <div class="timer-controls">
                        <button class="timer-btn btn-play" id="btn-timer-play" title="Iniciar"><i class="ri-play-fill"></i></button>
                        <button class="timer-btn btn-pause" id="btn-timer-pause" title="Pausar"><i class="ri-pause-fill"></i></button>
                        <button class="timer-btn btn-stop" id="btn-timer-stop" title="Finalizar e Salvar"><i class="ri-stop-fill"></i></button>
                    </div>
                </div>

                <section class="content-section">
                    <div class="section-header">
                        <h2><i class="ri-bar-chart-box-line"></i> Desempenho por Disciplina (Minutos)</h2>
                    </div>
                    <div style="position: relative; height: 300px; width: 100%; background: var(--bg-main); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 16px;">
                        <canvas id="studyChart"></canvas>
                    </div>
                </section>
            </div>

        </main>
    </div>

    <div id="modal-attr" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Novo Atributo (Skill)</h3>
            <p class="text-sub text-sm mb-3">Crie um atributo para evoluir (ex: Programa√ß√£o, Sa√∫de, Leitura).</p>
            <div class="input-group">
                <input type="text" id="input-attr-name" class="notion-input" placeholder="Nome do atributo..." autocomplete="off">
                <span class="error-msg" id="error-attr-name"></span>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel close-attr">Cancelar</button>
                <button class="btn-primary" id="save-attr">Criar Atributo</button>
            </div>
        </div>
    </div>
    
    <script type="module" src="script.js"></script>
</body>
</html>